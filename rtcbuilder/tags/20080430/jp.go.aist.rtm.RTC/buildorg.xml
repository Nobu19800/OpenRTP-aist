<project name="OpenRTM-aist-0.4.1" default="jar">
	<property name="jar.name" value="OpenRTM-aist-0.4.1"/>
	<property name="dist.dir" value="jar" />
	<property name="source" value="src"/>
	<property name="build.dir" value="bin"/>
	<property name="source.samples.class" value="bin/RTMExamples"/>
	<property name="source.samples.java" value="src/RTMExamples"/>
	<property name="dist.samples" value="installer/resources/Source/examples/RTMExamples"/>
	<property name="build.doc" value="installer/resources/Source/JavaDoc"/>
	<property name="build.dir.jar" value="installer/resources/Source/jar" />
	<property name="installer.dir" value="installer/commands" />
	<property name="installer.script" value="installer/commands/genwxs.vbs" />

	<target name="buildAll">
		<antcall target="jar" />
		<antcall target="javaExamples" />
		<antcall target="javaDoc" />
		<antcall target="javaInstaller" />
	</target>

	<target name="jar">
		<mkdir dir="${dist.dir}" />
		<delete file="${dist.dir}/${jar.name}.jar" />

		<jar destfile="${dist.dir}/${jar.name}.jar"
			 basedir="${build.dir}"
			 excludes="RTMExamples/**" />

		<delete file="${build.dir.jar}/${jar.name}.jar" />
		<copy file="${dist.dir}/${jar.name}.jar" todir="${build.dir.jar}" />
	</target>

	<target name="javaExamples">
		<delete dir="${dist.samples}" />
		
		<copy todir="${dist.samples}">
			<fileset dir="${source.samples.class}" />
			<fileset dir="${source.samples.java}" />
		</copy>
	</target>

	<target name="javaDoc">
		<delete dir="${build.doc}" />

		<javadoc sourcepath="${source}" destdir="${build.doc}"
			packagenames="jp.go.aist.rtm.RTC.*,RTMExamples.*,_SDOPackage.*,RTC.*" encoding="UTF-8"
			author="true" access="protected" doctitle="OpenRTM-aist Java" 
			nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" 
			source="1.5" splitindex="true" use="true" version="true"/>
	</target>

	<target name="javaInstaller">
		<exec dir="${installer.dir}" executable="cmd.exe">
			<arg line="/c genwxs.vbs"/>
		</exec>
	</target>

</project>
